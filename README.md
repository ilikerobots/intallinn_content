# inTallinn Content Provider

This is the companion content repo for [inTallinn](https://intallinn.ee) ([source](https://github.com/ilikerobots/intallinn)), a visitor's guide to Tallinn, Estonia.

This repo will generate and serve content utilized by the client content providers as explained in the inTallinn repo.

# Text Content

The text content is generated from markdown files contained in `web/content/section`.  The `MarkdownTransformer` located at `lib/transformer` will convert the markdown into HTML suitable for inTallinn when the app is served or built.


# Photo Content

The procedure for generating photo content requires more preparation than the text.

The section photos and their licensing info can be generated by executing `pub run bin/gen_section_photos`.   The script converts image sources and outputs finalized images and licensing info into `web/content/images/section'.

Note the script is dependent on the ImageMagick `convert` binary being available on the path.

The resources used by `gen_section_photos` are defined in 'assets/image/section_photo.yaml'.  This yaml file may be modified to use alternate photo assets or license info.  Example:  

```yaml
photos: 
 - airport:
   in_filename: section/airport-4789.jpg
   out_filename: airport.jpg
   license: 
     type: PUBLIC_DOMAIN
     author: cam
     author_url: http://www.openfotos.com/view/waiting-terminal-4747
 - seaport:
   in_filename: section/seaport.png
   out_filename: seaport.jpg
   license: 
     type: UNSPECIFIED
```

The same process applies to generating the primary splash photo with script 'gen_splash_photos'.


# Running

To debug with this content, run with standard `pub serve`.  You will likely need to supply an alternative port so as to avoid conflict with the main inTallinn app, e.g.

```sh
pub serve --port=8082
```
This should only be done for debugging.  In production environment, the package should be built in releaes mode to produce the necessary assets, which may be then served statically.




